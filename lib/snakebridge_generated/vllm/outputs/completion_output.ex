# Generated by SnakeBridge v0.15.1 - DO NOT EDIT MANUALLY
# Regenerate with: mix compile
# Library: vllm 0.14.0
# Python module: vllm.outputs
# Python class: CompletionOutput

defmodule Vllm.Outputs.CompletionOutput do
  @moduledoc """
  The output data of one completion output of a request.



  ## Parameters

  - `index` - The index of the output in the request.
  - `text` - The generated output text.
  - `token_ids` - The token IDs of the generated output text.
  - `cumulative_logprob` - The cumulative log probability of the generated output text.
  - `logprobs` - The log probabilities of the top probability words at each position if the logprobs are requested.
  - `finish_reason` - The reason why the sequence is finished.
  - `stop_reason` - The stop string or token id that caused the completion to stop, None if the completion finished for some other reason including encountering the EOS token.
  - `lora_request` - The LoRA request that was used to generate the output.
  """
  def __snakebridge_python_name__, do: "vllm.outputs"
  def __snakebridge_python_class__, do: "CompletionOutput"
  def __snakebridge_library__, do: "vllm"
  @opaque t :: SnakeBridge.Ref.t()

  @doc """
  Initialize self.  See help(type(self)) for accurate signature.

  ## Parameters

  - `index` (integer())
  - `text` (String.t())
  - `token_ids` (term())
  - `cumulative_logprob` (term())
  - `logprobs` (term())
  - `routed_experts` (term() default: None)
  - `finish_reason` (term() default: None)
  - `stop_reason` (term() default: None)
  - `lora_request` (term() default: None)
  """
  @spec new(integer(), String.t(), term(), term(), term(), list(term()), keyword()) ::
          {:ok, SnakeBridge.Ref.t()} | {:error, Snakepit.Error.t()}
  def new(index, text, token_ids, cumulative_logprob, logprobs, args, opts \\ []) do
    {args, opts} = SnakeBridge.Runtime.normalize_args_opts(args, opts)

    SnakeBridge.Runtime.call_class(
      __MODULE__,
      :__init__,
      [index, text, token_ids, cumulative_logprob, logprobs] ++ List.wrap(args),
      opts
    )
  end

  @doc """
  Python method `CompletionOutput.finished`.

  ## Returns

  - `boolean()`
  """
  @spec finished(SnakeBridge.Ref.t(), keyword()) ::
          {:ok, boolean()} | {:error, Snakepit.Error.t()}
  def finished(ref, opts \\ []) do
    SnakeBridge.Runtime.call_method(ref, :finished, [], opts)
  end

  @spec finish_reason(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def finish_reason(ref) do
    SnakeBridge.Runtime.get_attr(ref, :finish_reason)
  end

  @spec lora_request(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def lora_request(ref) do
    SnakeBridge.Runtime.get_attr(ref, :lora_request)
  end

  @spec routed_experts(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def routed_experts(ref) do
    SnakeBridge.Runtime.get_attr(ref, :routed_experts)
  end

  @spec stop_reason(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def stop_reason(ref) do
    SnakeBridge.Runtime.get_attr(ref, :stop_reason)
  end
end
