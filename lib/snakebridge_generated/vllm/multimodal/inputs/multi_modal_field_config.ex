# Generated by SnakeBridge v0.15.1 - DO NOT EDIT MANUALLY
# Regenerate with: mix compile
# Library: vllm 0.14.0
# Python module: vllm.multimodal.inputs
# Python class: MultiModalFieldConfig

defmodule Vllm.Multimodal.Inputs.MultiModalFieldConfig do
  @moduledoc """
  MultiModalFieldConfig(field: vllm.multimodal.inputs.BaseMultiModalField, modality: str)
  """
  def __snakebridge_python_name__, do: "vllm.multimodal.inputs"
  def __snakebridge_python_class__, do: "MultiModalFieldConfig"
  def __snakebridge_library__, do: "vllm"
  @opaque t :: SnakeBridge.Ref.t()

  @doc """
  Initialize self.  See help(type(self)) for accurate signature.

  ## Parameters

  - `field` (term())
  - `modality` (String.t())
  """
  @spec new(term(), String.t(), keyword()) ::
          {:ok, SnakeBridge.Ref.t()} | {:error, Snakepit.Error.t()}
  def new(field, modality, opts \\ []) do
    SnakeBridge.Runtime.call_class(__MODULE__, :__init__, [field, modality], opts)
  end

  @doc """
  Defines a field where an element in the batch is obtained by

  indexing into the first dimension of the underlying data.

  ## Parameters

  - `modality` - The modality of the multi-modal item that uses this keyword argument.
  - `keep_on_cpu` - Whether to keep this field on the CPU for the model inputs.

  ## Returns

  - `term()`
  """
  @spec batched(SnakeBridge.Ref.t(), String.t(), keyword()) ::
          {:ok, term()} | {:error, Snakepit.Error.t()}
  def batched(ref, modality, opts \\ []) do
    SnakeBridge.Runtime.call_method(ref, :batched, [modality], opts)
  end

  @doc """
  Python method `MultiModalFieldConfig.build_elems`.

  ## Parameters

  - `key` (String.t())
  - `batch` (((list(((list(term()) | list(term())) | term()) | {term(), term()}) | list(term())) | term())
  | {term(), term()})

  ## Returns

  - `term()`
  """
  @spec build_elems(
          SnakeBridge.Ref.t(),
          String.t(),
          ((list(((list(term()) | list(term())) | term()) | {term(), term()}) | list(term()))
           | term())
          | {term(), term()},
          keyword()
        ) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def build_elems(ref, key, batch, opts \\ []) do
    SnakeBridge.Runtime.call_method(ref, :build_elems, [key, batch], opts)
  end

  @doc """
  Defines a field where an element in the batch is obtained by

  slicing along the first dimension of the underlying data.

  ## Parameters

  - `modality` - The modality of the multi-modal item that uses this keyword argument.
  - `slices` - For each multi-modal item, a slice (dim=0) or a tuple of slices (dim>0) that is used to extract the data corresponding to it.
  - `dim` - The dimension to extract data, default to 0.
  - `keep_on_cpu` - Whether to keep this field on the CPU for the model inputs.

  ## Returns

  - `term()`
  """
  @spec flat(SnakeBridge.Ref.t(), String.t(), term(), list(term()), keyword()) ::
          {:ok, term()} | {:error, Snakepit.Error.t()}
  def flat(ref, modality, slices, args, opts \\ []) do
    {args, opts} = SnakeBridge.Runtime.normalize_args_opts(args, opts)
    SnakeBridge.Runtime.call_method(ref, :flat, [modality, slices] ++ List.wrap(args), opts)
  end

  @doc """
  Defines a field where an element in the batch is obtained by

  slicing along the first dimension of the underlying data.

  ## Parameters

  - `modality` - The modality of the multi-modal item that uses this keyword argument.
  - `size_per_item` - For each multi-modal item, the size of the slice that is used to extract the data corresponding to it.
  - `dim` - The dimension to slice, default to 0.
  - `keep_on_cpu` - Whether to keep this field on the CPU for the model inputs.

  ## Returns

  - `term()`
  """
  @spec flat_from_sizes(SnakeBridge.Ref.t(), String.t(), term(), list(term()), keyword()) ::
          {:ok, term()} | {:error, Snakepit.Error.t()}
  def flat_from_sizes(ref, modality, size_per_item, args, opts \\ []) do
    {args, opts} = SnakeBridge.Runtime.normalize_args_opts(args, opts)

    SnakeBridge.Runtime.call_method(
      ref,
      :flat_from_sizes,
      [modality, size_per_item] ++ List.wrap(args),
      opts
    )
  end

  @doc """
  Defines a field where an element in the batch is obtained by

  taking the entirety of the underlying data.

  This means that the data is the same for each element in the batch.

  ## Parameters

  - `modality` - The modality of the multi-modal item that uses this keyword argument.
  - `batch_size` - The number of multi-modal items which share this data.
  - `keep_on_cpu` - Whether to keep this field on the CPU for the model inputs.

  ## Returns

  - `term()`
  """
  @spec shared(SnakeBridge.Ref.t(), String.t(), integer(), keyword()) ::
          {:ok, term()} | {:error, Snakepit.Error.t()}
  def shared(ref, modality, batch_size, opts \\ []) do
    SnakeBridge.Runtime.call_method(ref, :shared, [modality, batch_size], opts)
  end
end
